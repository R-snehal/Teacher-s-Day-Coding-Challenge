#include <bits/stdc++.h>
using namespace std;
void solve() {
    int n, x;
    cin >> n >> x;
    vector<int> a(n);
    long long total_sum = 0;
    int first_non_multiple_x_from_left = -1;
    int first_non_multiple_x_from_right = -1;
 
    for (int i = 0; i < n; ++i) {
        cin >> a[i];
        total_sum += a[i];
    }
 
    if (total_sum % x != 0) {
        cout << n << endl;
        return;
    }
    for (int i = 0; i < n; ++i) {
        if (a[i] % x != 0) {
            first_non_multiple_x_from_left = i;
            break;
        }
    }
 
    for (int i = n - 1; i >= 0; --i) {
        if (a[i] % x != 0) {
            first_non_multiple_x_from_right = i;
            break;
        }
    }
 
    if (first_non_multiple_x_from_left == -1) {
        cout << -1 << endl;
    } else {
        int len1 = n - (first_non_multiple_x_from_left + 1);
        int len2 = first_non_multiple_x_from_right;
        
        cout << max(len1, len2) << endl;
    }
}
int main() {
    int t;
    cin >> t;
    while (t--) {
        solve();
    }
    return 0;
}
